<controls:UserControl
  x:Class="Synthesis.Feature.Ability.AbilityEditorView"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
  x:Name="Root"
  TextElement.Foreground="{DynamicResource MaterialDesignBody}"
  xmlns:controls="clr-namespace:System.Windows.Controls;assembly=PresentationFramework">
  <Grid>
    <Grid.ColumnDefinitions>
      <ColumnDefinition
        Width="220" />
      <ColumnDefinition
        Width="*" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
      <RowDefinition
        Height="Auto" />
      <RowDefinition
        Height="*" />
    </Grid.RowDefinitions>
    <Border
      Grid.Row="0"
      Grid.ColumnSpan="2"
      Background="{DynamicResource MaterialDesignPaper}"
      BorderBrush="{DynamicResource MaterialDesignDivider}"
      BorderThickness="0,0,0,1"
      Padding="8,4">
      <StackPanel
        Orientation="Horizontal">
        <Button
          Content="âž• æ–°å»ºè¯æ¡"
          Padding="10,5"
          Margin="0,0,5,0"
          FontWeight="Bold"
          Style="{StaticResource MaterialDesignRaisedButton}"
          Command="{Binding CreateCommand}"
          IsEnabled="{Binding Manager.AbilityRepo.HasModLoc}">
          <FrameworkElement.Resources>
            <ResourceDictionary />
          </FrameworkElement.Resources>
        </Button>
        <Button
          Content="ðŸ—‘ï¸ åˆ é™¤è¯æ¡"
          Padding="10,5"
          Margin="0,0,5,0"
          Style="{StaticResource MaterialDesignOutlinedButton}"
          Foreground="#FFFFFF00"
          BorderBrush="#FFFFFF00"
          Command="{Binding DeleteCommand}" />
        <Button
          Content="ðŸ” æ‰«æç¼ºå¤±"
          Padding="10,5"
          FontWeight="Bold"
          Style="{StaticResource MaterialDesignOutlinedButton}"
          Foreground="#FF00FFFF"
          BorderBrush="#FF00FFFF"
          Command="{Binding ScanMissingCommand}" />
      </StackPanel>
    </Border>
    <DockPanel
      Grid.Row="1"
      Grid.Column="0">
      <TextBox
        x:Name="SearchBox"
        DockPanel.Dock="Top"
        Margin="4"
        Padding="4"
        materialDesign:HintAssist.Hint="æœç´¢..."
        Style="{StaticResource MaterialDesignOutlinedTextBox}"
        TextChanged="SearchBox_TextChanged" />
      <ListBox
        x:Name="AbilityListBox"
        DisplayMemberPath="DisplayName"
        BorderThickness="0,1,1,0"
        BorderBrush="{DynamicResource MaterialDesignDivider}"
        ItemsSource="{Binding Manager.AbilityRepo.Items}"
        SelectedItem="{Binding SelectedItem}"
        SelectionChanged="AbilityListBox_SelectionChanged" />
    </DockPanel>
    <Grid
      Row="1"
      Column="1">
      <StackPanel
        x:Name="EditPanel"
        Margin="15"
        Visibility="Hidden"
        DataContext="{Binding SelectedItem}">
        <FrameworkElement.Style>
          <Style
            TargetType="{x:Type StackPanel}">
            <Style.Triggers>
              <DataTrigger
                Value="True"
                Binding="{Binding IsVanilla}">
                <Setter
                  Property="IsEnabled"
                  Value="False" />
                <Setter
                  Property="UIElement.Opacity"
                  Value="0.6" />
              </DataTrigger>
            </Style.Triggers>
          </Style>
        </FrameworkElement.Style>
        <TextBlock
          Text="èƒ½åŠ›æè¿° (BattleCardAbility)"
          FontSize="18"
          FontWeight="Bold"
          Margin="0,0,0,15" />
        <TextBox
          materialDesign:HintAssist.Hint="ID (Script Name)"
          Style="{StaticResource MaterialDesignFloatingHintTextBox}"
          Margin="0,0,0,15"
          Text="{Binding Id, UpdateSourceTrigger=PropertyChanged}" />
        <TextBlock
          Text="Desc (æè¿°):"
          FontWeight="Bold"
          Margin="0,5,0,5" />
        <TextBox
          Height="200"
          AcceptsReturn="True"
          TextWrapping="Wrap"
          VerticalScrollBarVisibility="Auto"
          Padding="5"
          Style="{StaticResource MaterialDesignOutlinedTextBox}"
          materialDesign:HintAssist.Hint="è¾“å…¥å¤šè¡Œæè¿°..."
          Text="{Binding Desc, UpdateSourceTrigger=PropertyChanged}" />
        <TextBlock
          Text="* æ”¯æŒ {0} å ä½ç¬¦"
          FontSize="10"
          Opacity="0.5"
          Margin="0,2,0,0"
          HorizontalAlignment="Right" />
      </StackPanel>
    </Grid>
  </Grid>
</controls:UserControl>
