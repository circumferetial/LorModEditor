<controls:UserControl
  x:Class="Synthesis.Feature.Book.BookEditorView"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:prism="http://prismlibrary.com/"
  xmlns:components="clr-namespace:Synthesis.Views.Components"
  xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
  xmlns:core="clr-namespace:Synthesis.Core"
  x:Name="Root"
  prism:ViewModelLocator.AutoWireViewModel="True"
  TextElement.Foreground="{DynamicResource MaterialDesignBody}"
  xmlns:controls="clr-namespace:System.Windows.Controls;assembly=PresentationFramework">
  <Grid>
    <Grid.ColumnDefinitions>
      <ColumnDefinition
        Width="260" />
      <ColumnDefinition
        Width="*" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
      <RowDefinition
        Height="Auto" />
      <RowDefinition
        Height="*" />
    </Grid.RowDefinitions>
    <Border
      Grid.Row="0"
      Grid.ColumnSpan="2"
      Background="{DynamicResource MaterialDesignPaper}"
      BorderBrush="{DynamicResource MaterialDesignDivider}"
      BorderThickness="0,0,0,1"
      Padding="8,4">
      <StackPanel
        Orientation="Horizontal">
        <Button
          Content="âž• æ–°å»ºä¹¦é¡µ"
          Style="{StaticResource MaterialDesignRaisedButton}"
          Margin="0,0,8,0"
          Padding="10,5"
          Command="{Binding CreateCommand}"
          IsEnabled="{Binding Manager.BookRepo.HasModData}" />
        <Button
          Content="ðŸ—‘ï¸ åˆ é™¤ä¹¦é¡µ"
          Style="{StaticResource MaterialDesignOutlinedButton}"
          Foreground="#FF5252"
          BorderBrush="#FF5252"
          Padding="10,5"
          Margin="0,0,8,0"
          Command="{Binding DeleteCommand}" />
      </StackPanel>
    </Border>
    <DockPanel
      Grid.Row="1"
      Grid.Column="0">
      <TextBox
        x:Name="SearchBox"
        DockPanel.Dock="Top"
        Margin="4"
        Padding="4"
        materialDesign:HintAssist.Hint="æœç´¢ ID æˆ– åç§°..."
        Style="{StaticResource MaterialDesignOutlinedTextBox}"
        TextChanged="SearchBox_TextChanged" />
      <ListBox
        x:Name="BookList"
        VirtualizingPanel.IsVirtualizing="True"
        VirtualizingPanel.VirtualizationMode="Recycling"
        DisplayMemberPath="DisplayName"
        BorderThickness="0,1,1,0"
        BorderBrush="{DynamicResource MaterialDesignDivider}"
        ItemsSource="{Binding Manager.BookRepo.Items}"
        SelectedItem="{Binding SelectedItem}" />
    </DockPanel>
    <ScrollViewer
      Grid.Row="1"
      Grid.Column="1"
      VerticalScrollBarVisibility="Auto">
      <StackPanel
        x:Name="EditPanel"
        Margin="20"
        DataContext="{Binding SelectedItem}">
        <FrameworkElement.Style>
          <Style
            TargetType="{x:Type StackPanel}">
            <Setter
              Property="Visibility"
              Value="Visible" />
            <Style.Triggers>
              <DataTrigger
                Binding="{Binding}"
                Value="{x:Null}">
                <Setter
                  Property="Visibility"
                  Value="Hidden" />
              </DataTrigger>
              <DataTrigger
                Value="True"
                Binding="{Binding IsVanilla}">
                <Setter
                  Property="IsEnabled"
                  Value="False" />
                <Setter
                  Property="UIElement.Opacity"
                  Value="0.6" />
              </DataTrigger>
            </Style.Triggers>
          </Style>
        </FrameworkElement.Style>
        <TextBlock
          Text="æ ¸å¿ƒä¹¦é¡µç¼–è¾‘ (Key Page)"
          FontSize="22"
          FontWeight="Bold"
          Margin="0,0,0,20" />
        <Expander
          Header="âš™ï¸ åŸºç¡€å‚æ•° (Basic)"
          IsExpanded="True"
          Margin="0,0,0,10">
          <StackPanel
            Margin="0,10,0,0">
            <Grid
              Margin="0,0,0,15">
              <Grid.ColumnDefinitions>
                <ColumnDefinition
                  Width="*" />
                <ColumnDefinition
                  Width="10" />
                <ColumnDefinition
                  Width="2*" />
                <ColumnDefinition
                  Width="Auto" />
              </Grid.ColumnDefinitions>
              <TextBox
                Grid.Column="0"
                Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                materialDesign:HintAssist.Hint="ID"
                Text="{Binding Id, UpdateSourceTrigger=PropertyChanged}" />
              <TextBox
                Grid.Column="2"
                Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                materialDesign:HintAssist.Hint="Name (åç§°)"
                Text="{Binding Name, UpdateSourceTrigger=PropertyChanged}" />
              <Button
                Grid.Column="3"
                Content="ðŸ’¬ ç”Ÿæˆå¯¹è¯æ¨¡æ¿"
                Margin="10,0,0,0"
                Padding="10,4"
                Style="{StaticResource MaterialDesignOutlinedButton}"
                Foreground="#FF00FFFF"
                BorderBrush="#FF00FFFF"
                Click="GenDialog_Click" />
            </Grid>
            <Grid
              Margin="0,0,0,15">
              <Grid.ColumnDefinitions>
                <ColumnDefinition
                  Width="*" />
                <ColumnDefinition
                  Width="10" />
                <ColumnDefinition
                  Width="*" />
                <ColumnDefinition
                  Width="10" />
                <ColumnDefinition
                  Width="*" />
                <ColumnDefinition
                  Width="10" />
                <ColumnDefinition
                  Width="*" />
              </Grid.ColumnDefinitions>
              <TextBox
                Grid.Column="0"
                Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                materialDesign:HintAssist.Hint="Episode (æŽ¥å¾…ID)"
                Text="{Binding Episode, UpdateSourceTrigger=PropertyChanged}" />
              <ComboBox
                Grid.Column="2"
                ItemsSource="{x:Static core:GlobalValues.Rarities}"
                Style="{StaticResource MaterialDesignFloatingHintComboBox}"
                materialDesign:HintAssist.Hint="Rarity"
                SelectedItem="{Binding Rarity, UpdateSourceTrigger=PropertyChanged}" />
              <ComboBox
                Grid.Column="4"
                ItemsSource="{x:Static core:GlobalValues.BookChapters}"
                Style="{StaticResource MaterialDesignFloatingHintComboBox}"
                materialDesign:HintAssist.Hint="Chapter (ç­‰çº§)"
                ToolTip="1:ä¼ é—»...7:æ‚è´¨"
                SelectedItem="{Binding Chapter, UpdateSourceTrigger=PropertyChanged}" />
              <ComboBox
                Grid.Column="6"
                ItemsSource="{x:Static core:GlobalValues.RangeTypes}"
                Style="{StaticResource MaterialDesignFloatingHintComboBox}"
                materialDesign:HintAssist.Hint="RangeType"
                SelectedItem="{Binding RangeType, UpdateSourceTrigger=PropertyChanged}" />
            </Grid>
            <Grid
              Margin="0,0,0,10">
              <Grid.ColumnDefinitions>
                <ColumnDefinition
                  Width="Auto" />
                <ColumnDefinition
                  Width="20" />
                <ColumnDefinition
                  Width="*" />
              </Grid.ColumnDefinitions>
              <StackPanel
                Grid.Column="0">
                <components:ImageSelector
                  LabelText="Book Icon"
                  PreviewWidth="80"
                  PreviewHeight="80"
                  SelectedImageName="{Binding BookIcon, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                  ImageList="{Binding DataContext.Manager.Artworks, ElementName=Root}"
                  Manager="{Binding DataContext.Manager, ElementName=Root}" />
              </StackPanel>
              <StackPanel
                Grid.Column="2"
                VerticalAlignment="Bottom">
                <ComboBox
                  ItemsSource="{x:Static core:GlobalValues.SkinTypes}"
                  Style="{StaticResource MaterialDesignFloatingHintComboBox}"
                  materialDesign:HintAssist.Hint="Skin Type (çš®è‚¤ç±»åž‹)"
                  Margin="0,0,0,10"
                  SelectedItem="{Binding SkinType, UpdateSourceTrigger=PropertyChanged}" />
                <ComboBox
                  IsEditable="True"
                  Style="{StaticResource MaterialDesignFloatingHintComboBox}"
                  materialDesign:HintAssist.Hint="Character Skin (æ¨¡åž‹)"
                  Text="{Binding CharacterSkin, UpdateSourceTrigger=PropertyChanged}">
                  <ItemsControl.Items>
                    <system1:String
                      xmlns:system1="clr-namespace:System;assembly=mscorlib">
                      Default
                    </system1:String>
                    <String
                      xmlns="clr-namespace:System;assembly=mscorlib">
                      Liwei
                    </String>
                    <String
                      xmlns="clr-namespace:System;assembly=mscorlib">
                      Roland
                    </String>
                    <String
                      xmlns="clr-namespace:System;assembly=mscorlib">
                      Angela
                    </String>
                  </ItemsControl.Items>
                </ComboBox>
              </StackPanel>
            </Grid>
          </StackPanel>
        </Expander>
        <Expander
          Header="ðŸ“Š æˆ˜æ–—æ•°å€¼ (Stats)"
          IsExpanded="True"
          Margin="0,0,0,10">
          <Grid
            Margin="0,15,0,5">
            <Grid.RowDefinitions>
              <RowDefinition
                Height="Auto" />
              <RowDefinition
                Height="Auto" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
              <ColumnDefinition
                Width="*" />
              <ColumnDefinition
                Width="15" />
              <ColumnDefinition
                Width="*" />
              <ColumnDefinition
                Width="15" />
              <ColumnDefinition
                Width="*" />
            </Grid.ColumnDefinitions>
            <TextBox
              Grid.Row="0"
              Grid.Column="0"
              Style="{StaticResource MaterialDesignFloatingHintTextBox}"
              materialDesign:HintAssist.Hint="HP (ä½“åŠ›)"
              Margin="0,0,0,15"
              Text="{Binding HP, UpdateSourceTrigger=PropertyChanged}" />
            <TextBox
              Grid.Row="0"
              Grid.Column="2"
              Style="{StaticResource MaterialDesignFloatingHintTextBox}"
              materialDesign:HintAssist.Hint="Break (æ··ä¹±)"
              Margin="0,0,0,15"
              Text="{Binding Break, UpdateSourceTrigger=PropertyChanged}" />
            <StackPanel
              Grid.Row="0"
              Grid.Column="4">
              <TextBlock
                Text="Speed (é€Ÿåº¦)"
                FontSize="10"
                Opacity="0.7" />
              <StackPanel
                Orientation="Horizontal">
                <TextBox
                  Width="40"
                  Style="{StaticResource MaterialDesignTextBox}"
                  HorizontalContentAlignment="Center"
                  Text="{Binding SpeedMin, UpdateSourceTrigger=PropertyChanged}" />
                <TextBlock
                  Text=" - "
                  VerticalAlignment="Center"
                  Margin="5,0" />
                <TextBox
                  Width="40"
                  Style="{StaticResource MaterialDesignTextBox}"
                  HorizontalContentAlignment="Center"
                  Text="{Binding Speed, UpdateSourceTrigger=PropertyChanged}" />
              </StackPanel>
            </StackPanel>
            <TextBox
              Grid.Row="1"
              Grid.Column="0"
              Style="{StaticResource MaterialDesignFloatingHintTextBox}"
              materialDesign:HintAssist.Hint="Start Light (åˆå§‹å…‰)"
              Text="{Binding StartPlayPoint, UpdateSourceTrigger=PropertyChanged}" />
            <TextBox
              Grid.Row="1"
              Grid.Column="2"
              Style="{StaticResource MaterialDesignFloatingHintTextBox}"
              materialDesign:HintAssist.Hint="Max Light (æœ€å¤§å…‰)"
              Text="{Binding MaxPlayPoint, UpdateSourceTrigger=PropertyChanged}" />
          </Grid>
        </Expander>
        <Expander
          Header="ðŸ›¡ï¸ æŠ—æ€§ (Resistances)"
          IsExpanded="True"
          Margin="0,0,0,10">
          <Grid
            Margin="0,10,0,0">
            <Grid.RowDefinitions>
              <RowDefinition
                Height="Auto" />
              <RowDefinition
                Height="Auto" />
              <RowDefinition
                Height="Auto" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
              <ColumnDefinition
                Width="60" />
              <ColumnDefinition
                Width="*" />
              <ColumnDefinition
                Width="*" />
              <ColumnDefinition
                Width="*" />
            </Grid.ColumnDefinitions>
            <TextBlock
              Grid.Row="0"
              Grid.Column="1"
              Text="ðŸ”ª æ–©å‡»"
              HorizontalAlignment="Center"
              Opacity="0.7" />
            <TextBlock
              Grid.Row="0"
              Grid.Column="2"
              Text="ðŸ“Œ ç©¿åˆº"
              HorizontalAlignment="Center"
              Opacity="0.7" />
            <TextBlock
              Grid.Row="0"
              Grid.Column="3"
              Text="ðŸ”¨ æ‰“å‡»"
              HorizontalAlignment="Center"
              Opacity="0.7" />
            <TextBlock
              Grid.Row="1"
              Grid.Column="0"
              Text="ç‰©ç†"
              VerticalAlignment="Center"
              FontWeight="Bold"
              Margin="0,10,0,0" />
            <ComboBox
              Grid.Row="1"
              Grid.Column="1"
              Margin="4"
              ItemsSource="{x:Static core:GlobalValues.Resistances}"
              Style="{StaticResource MaterialDesignComboBox}"
              SelectedItem="{Binding SResist, UpdateSourceTrigger=PropertyChanged}" />
            <ComboBox
              Grid.Row="1"
              Grid.Column="2"
              Margin="4"
              ItemsSource="{x:Static core:GlobalValues.Resistances}"
              Style="{StaticResource MaterialDesignComboBox}"
              SelectedItem="{Binding PResist, UpdateSourceTrigger=PropertyChanged}" />
            <ComboBox
              Grid.Row="1"
              Grid.Column="3"
              Margin="4"
              ItemsSource="{x:Static core:GlobalValues.Resistances}"
              Style="{StaticResource MaterialDesignComboBox}"
              SelectedItem="{Binding HResist, UpdateSourceTrigger=PropertyChanged}" />
            <TextBlock
              Grid.Row="2"
              Grid.Column="0"
              Text="æ··ä¹±"
              VerticalAlignment="Center"
              FontWeight="Bold"
              Margin="0,10,0,0" />
            <ComboBox
              Grid.Row="2"
              Grid.Column="1"
              Margin="4"
              ItemsSource="{x:Static core:GlobalValues.Resistances}"
              Style="{StaticResource MaterialDesignComboBox}"
              SelectedItem="{Binding SBResist, UpdateSourceTrigger=PropertyChanged}" />
            <ComboBox
              Grid.Row="2"
              Grid.Column="2"
              Margin="4"
              ItemsSource="{x:Static core:GlobalValues.Resistances}"
              Style="{StaticResource MaterialDesignComboBox}"
              SelectedItem="{Binding PBResist, UpdateSourceTrigger=PropertyChanged}" />
            <ComboBox
              Grid.Row="2"
              Grid.Column="3"
              Margin="4"
              ItemsSource="{x:Static core:GlobalValues.Resistances}"
              Style="{StaticResource MaterialDesignComboBox}"
              SelectedItem="{Binding HBResist, UpdateSourceTrigger=PropertyChanged}" />
          </Grid>
        </Expander>
        <Expander
          Header="âš¡ æ ¸å¿ƒè¢«åŠ¨ (Passives)"
          IsExpanded="True"
          Margin="0,0,0,10">
          <StackPanel
            Margin="0,10,0,0">
            <Grid
              Margin="0,0,0,10">
              <Grid.ColumnDefinitions>
                <ColumnDefinition
                  Width="*" />
                <ColumnDefinition
                  Width="Auto" />
              </Grid.ColumnDefinitions>
              <ComboBox
                x:Name="PassiveSelector"
                Grid.Column="0"
                IsEditable="True"
                StaysOpenOnEdit="True"
                IsTextSearchEnabled="False"
                DisplayMemberPath="DisplayName"
                Style="{StaticResource MaterialDesignFloatingHintComboBox}"
                materialDesign:HintAssist.Hint="é€‰æ‹©è¢«åŠ¨èƒ½åŠ›..."
                ItemsSource="{Binding DataContext.Manager.PassiveRepo.Items, ElementName=Root}"
                SelectedItem="{Binding DataContext.SelectedPassiveToAdd, ElementName=Root}" />
              <Button
                Grid.Column="1"
                Content="âž• æ·»åŠ "
                Style="{StaticResource MaterialDesignOutlinedButton}"
                Margin="10,0,0,0"
                VerticalAlignment="Bottom"
                Command="{Binding DataContext.AddPassiveCommand, ElementName=Root}" />
            </Grid>
            <ListBox
              MaxHeight="300"
              Background="#00FFFFFF"
              Style="{StaticResource MaterialDesignOutlinedListBox}"
              Padding="0"
              ScrollViewer.VerticalScrollBarVisibility="Auto"
              ItemsSource="{Binding Passives}"
              PreviewMouseWheel="IgnoreMouseWheel">
              <ItemsControl.ItemContainerStyle>
                <Style
                  BasedOn="{StaticResource MaterialDesignListBoxItem}"
                  TargetType="{x:Type ListBoxItem}">
                  <Setter
                    Property="Padding"
                    Value="10,5" />
                  <Setter
                    Property="Foreground"
                    Value="{DynamicResource MaterialDesignBody}" />
                </Style>
              </ItemsControl.ItemContainerStyle>
              <ItemsControl.ItemTemplate>
                <DataTemplate>
                  <Grid>
                    <Grid.ColumnDefinitions>
                      <ColumnDefinition
                        Width="*" />
                      <ColumnDefinition
                        Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock
                      VerticalAlignment="Center"
                      Text="{Binding}" />
                    <Button
                      Grid.Column="1"
                      Style="{StaticResource MaterialDesignToolButton}"
                      Foreground="#FF5252"
                      Height="24"
                      Width="24"
                      Padding="0"
                      Command="{Binding DataContext.RemovePassiveCommand, ElementName=Root}"
                      CommandParameter="{Binding}">
                      <materialDesign:PackIcon
                        Kind="Close" />
                    </Button>
                  </Grid>
                </DataTemplate>
              </ItemsControl.ItemTemplate>
            </ListBox>
          </StackPanel>
        </Expander>
        <Expander
          Header="ðŸƒ ä¸“å±žä¹¦é¡µ (Only Cards)"
          IsExpanded="True"
          Margin="0,0,0,15">
          <materialDesign:Card
            FrameworkElement.Margin="0,10,0,0"
            Control.Background="#1AFFFFFF"
            UniformCornerRadius="8"
            materialDesign:ElevationAssist.Elevation="Dp0">
            <Border
              BorderBrush="{DynamicResource MaterialDesignDivider}"
              BorderThickness="1"
              CornerRadius="8"
              Padding="15">
              <Grid
                Height="350">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition
                    Width="*" />
                  <ColumnDefinition
                    Width="80" />
                  <ColumnDefinition
                    Width="*" />
                </Grid.ColumnDefinitions>
                <DockPanel
                  Grid.Column="0">
                  <StackPanel
                    DockPanel.Dock="Top"
                    Orientation="Horizontal"
                    Margin="0,0,0,8">
                    <materialDesign:PackIcon
                      Kind="LinkVariant"
                      Foreground="#FFCA28"
                      FrameworkElement.VerticalAlignment="Center"
                      FrameworkElement.Margin="0,0,8,0" />
                    <TextBlock
                      Text="å·²ç»‘å®š (Bound)"
                      FontWeight="Bold"
                      Foreground="#FFCA28"
                      FontSize="14" />
                  </StackPanel>
                  <Border
                    BorderBrush="#FFCA28"
                    BorderThickness="1"
                    CornerRadius="4"
                    Background="#121212">
                    <ListBox
                      Background="#00FFFFFF"
                      Padding="0"
                      ScrollViewer.VerticalScrollBarVisibility="Auto"
                      ItemsSource="{Binding OnlyCards}">
                      <ItemsControl.ItemTemplate>
                        <DataTemplate>
                          <Border
                            Padding="12,8"
                            Background="#00FFFFFF"
                            Cursor="Hand"
                            ToolTip="åŒå‡»ç§»é™¤"
                            BorderBrush="#333"
                            BorderThickness="0,0,0,1">
                            <UIElement.InputBindings>
                              <MouseBinding
                                Gesture="LeftDoubleClick"
                                Command="{Binding DataContext.RemoveOnlyCardCommand, ElementName=Root}"
                                CommandParameter="{Binding}" />
                            </UIElement.InputBindings>
                            <Grid>
                              <TextBlock
                                VerticalAlignment="Center"
                                FontWeight="Medium"
                                Foreground="{DynamicResource MaterialDesignBody}"
                                Text="{Binding}" />
                              <materialDesign:PackIcon
                                Kind="ArrowRightBold"
                                FrameworkElement.HorizontalAlignment="Right"
                                Foreground="#FFCA28"
                                UIElement.Opacity="0.5" />
                            </Grid>
                          </Border>
                        </DataTemplate>
                      </ItemsControl.ItemTemplate>
                    </ListBox>
                  </Border>
                </DockPanel>
                <StackPanel
                  Grid.Column="1"
                  VerticalAlignment="Center"
                  HorizontalAlignment="Center"
                  Opacity="0.7">
                  <materialDesign:PackIcon
                    Kind="SwapHorizontalCircle"
                    FrameworkElement.Width="40"
                    FrameworkElement.Height="40"
                    Foreground="#FF808080"
                    FrameworkElement.Margin="0,0,0,5" />
                  <TextBlock
                    Text="åŒå‡»ç§»åŠ¨"
                    FontSize="12"
                    Foreground="#FF808080"
                    HorizontalAlignment="Center" />
                </StackPanel>
                <DockPanel
                  Grid.Column="2">
                  <StackPanel
                    DockPanel.Dock="Top"
                    Orientation="Horizontal"
                    Margin="0,0,0,8">
                    <materialDesign:PackIcon
                      Kind="Library"
                      Foreground="#FF00FFFF"
                      FrameworkElement.VerticalAlignment="Center"
                      FrameworkElement.Margin="0,0,8,0" />
                    <TextBlock
                      Text="å¡ç‰Œåº“ (Library)"
                      FontWeight="Bold"
                      Foreground="#FF00FFFF"
                      FontSize="14" />
                  </StackPanel>
                  <Border
                    BorderBrush="#FF00FFFF"
                    BorderThickness="1"
                    CornerRadius="4"
                    Background="#121212">
                    <ListBox
                      Background="#00FFFFFF"
                      Padding="0"
                      ScrollViewer.VerticalScrollBarVisibility="Auto"
                      ItemsSource="{Binding DataContext.Manager.CardRepo.Items, ElementName=Root}">
                      <ItemsControl.ItemTemplate>
                        <DataTemplate>
                          <Border
                            Padding="12,8"
                            Background="#00FFFFFF"
                            Cursor="Hand"
                            ToolTip="åŒå‡»ç»‘å®š"
                            BorderBrush="#333"
                            BorderThickness="0,0,0,1">
                            <UIElement.InputBindings>
                              <MouseBinding
                                Gesture="LeftDoubleClick"
                                Command="{Binding DataContext.AddOnlyCardCommand, ElementName=Root}"
                                CommandParameter="{Binding}" />
                            </UIElement.InputBindings>
                            <Grid>
                              <materialDesign:PackIcon
                                Kind="ArrowLeftBold"
                                FrameworkElement.HorizontalAlignment="Left"
                                Foreground="#FF00FFFF"
                                UIElement.Opacity="0.5" />
                              <TextBlock
                                Margin="24,0,0,0"
                                VerticalAlignment="Center"
                                Foreground="{DynamicResource MaterialDesignBody}"
                                Text="{Binding DisplayName}" />
                            </Grid>
                          </Border>
                        </DataTemplate>
                      </ItemsControl.ItemTemplate>
                    </ListBox>
                  </Border>
                </DockPanel>
              </Grid>
            </Border>
          </materialDesign:Card>
        </Expander>
        <Expander
          Header="ðŸ“– ä¹¦ç±æ•…äº‹ (Story)"
          IsExpanded="True"
          Margin="0,0,0,10">
          <StackPanel
            Margin="0,10,0,0">
            <TextBox
              Height="150"
              AcceptsReturn="True"
              TextWrapping="Wrap"
              VerticalScrollBarVisibility="Auto"
              Style="{StaticResource MaterialDesignOutlinedTextBox}"
              materialDesign:HintAssist.Hint="è¾“å…¥æ•…äº‹æ–‡æœ¬..."
              Padding="8"
              Text="{Binding BookStory, UpdateSourceTrigger=PropertyChanged}"
              PreviewMouseWheel="IgnoreMouseWheel" />
          </StackPanel>
        </Expander>
        <TextBlock
          Height="50" />
      </StackPanel>
    </ScrollViewer>
  </Grid>
</controls:UserControl>
