<controls:UserControl
  x:Class="Synthesis.Feature.Keyword.KeywordEditorView"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
  TextElement.Foreground="{DynamicResource MaterialDesignBody}"
  xmlns:controls="clr-namespace:System.Windows.Controls;assembly=PresentationFramework">
  <Grid>
    <Grid.ColumnDefinitions>
      <ColumnDefinition
        Width="260" />
      <ColumnDefinition
        Width="*" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
      <RowDefinition
        Height="Auto" />
      <RowDefinition
        Height="*" />
    </Grid.RowDefinitions>
    <Border
      Grid.Row="0"
      Grid.ColumnSpan="2"
      Background="{DynamicResource MaterialDesignPaper}"
      BorderBrush="{DynamicResource MaterialDesignDivider}"
      BorderThickness="0,0,0,1"
      Padding="8,4">
      <StackPanel
        Orientation="Horizontal">
        <Button
          Content="âž• æ–°å»ºè¯æ¡"
          Style="{StaticResource MaterialDesignRaisedButton}"
          Margin="0,0,10,0"
          Padding="12,6"
          Command="{Binding CreateCommand}"
          IsEnabled="{Binding Manager.KeywordRepo.HasModLoc}">
          <FrameworkElement.ToolTip>
            <ToolTip
              Content="æ–°å»ºä¸€ä¸ªå…³é”®å­—" />
          </FrameworkElement.ToolTip>
        </Button>
        <Button
          Content="ðŸ—‘ï¸ åˆ é™¤è¯æ¡"
          Style="{StaticResource MaterialDesignOutlinedButton}"
          Padding="12,6"
          Margin="0,0,10,0"
          Foreground="#FF5252"
          BorderBrush="#FF5252"
          Command="{Binding DeleteCommand}" />
      </StackPanel>
    </Border>
    <DockPanel
      Grid.Row="1"
      Grid.Column="0">
      <TextBox
        x:Name="SearchBox"
        DockPanel.Dock="Top"
        Margin="4"
        Padding="4"
        materialDesign:HintAssist.Hint="æœç´¢ ID, åç§°æˆ–æè¿°..."
        Style="{StaticResource MaterialDesignOutlinedTextBox}"
        TextChanged="SearchBox_TextChanged" />
      <ListBox
        x:Name="KeywordListBox"
        VirtualizingPanel.IsVirtualizing="True"
        VirtualizingPanel.VirtualizationMode="Recycling"
        DisplayMemberPath="DisplayName"
        BorderThickness="0,1,1,0"
        BorderBrush="{DynamicResource MaterialDesignDivider}"
        ItemsSource="{Binding Manager.KeywordRepo.Items}"
        SelectedItem="{Binding SelectedItem}"
        SelectionChanged="KeywordListBox_SelectionChanged" />
    </DockPanel>
    <StackPanel
      x:Name="EditPanel"
      Grid.Row="1"
      Grid.Column="1"
      Margin="30"
      DataContext="{Binding SelectedItem}">
      <FrameworkElement.Style>
        <Style
          TargetType="{x:Type StackPanel}">
          <Setter
            Property="Visibility"
            Value="Visible" />
          <Style.Triggers>
            <DataTrigger
              Binding="{Binding}"
              Value="{x:Null}">
              <Setter
                Property="Visibility"
                Value="Hidden" />
            </DataTrigger>
            <DataTrigger
              Value="True"
              Binding="{Binding IsVanilla}">
              <Setter
                Property="IsEnabled"
                Value="False" />
              <Setter
                Property="UIElement.Opacity"
                Value="0.6" />
            </DataTrigger>
          </Style.Triggers>
        </Style>
      </FrameworkElement.Style>
      <TextBlock
        Text="å…³é”®å­—ç¼–è¾‘ (Keyword / BattleEffectText)"
        FontSize="22"
        FontWeight="Bold"
        Margin="0,0,0,25"
        Foreground="{DynamicResource MaterialDesignBody}" />
      <Grid
        Margin="0,0,0,20">
        <Grid.ColumnDefinitions>
          <ColumnDefinition
            Width="*" />
          <ColumnDefinition
            Width="20" />
          <ColumnDefinition
            Width="*" />
        </Grid.ColumnDefinitions>
        <TextBox
          Grid.Column="0"
          Style="{StaticResource MaterialDesignFloatingHintTextBox}"
          materialDesign:HintAssist.Hint="ID (Script ID)"
          Text="{Binding Id, UpdateSourceTrigger=PropertyChanged}" />
        <TextBox
          Grid.Column="2"
          Style="{StaticResource MaterialDesignFloatingHintTextBox}"
          materialDesign:HintAssist.Hint="Name (æ˜¾ç¤ºåç§°)"
          Text="{Binding Name, UpdateSourceTrigger=PropertyChanged}" />
      </Grid>
      <TextBlock
        Text="Description (æ•ˆæžœæè¿°)"
        FontWeight="Bold"
        Margin="0,10,0,5"
        Opacity="0.8" />
      <TextBox
        Height="200"
        AcceptsReturn="True"
        TextWrapping="Wrap"
        VerticalScrollBarVisibility="Auto"
        Style="{StaticResource MaterialDesignOutlinedTextBox}"
        materialDesign:HintAssist.Hint="åœ¨æ­¤è¾“å…¥è¯¦ç»†æè¿°..."
        Padding="10"
        Margin="0,0,0,5"
        Text="{Binding Desc, UpdateSourceTrigger=PropertyChanged}" />
      <StackPanel
        Orientation="Horizontal"
        HorizontalAlignment="Right"
        Opacity="0.6">
        <TextBlock
          Text="* æ”¯æŒå¤šè¡Œè¾“å…¥"
          Margin="0,0,10,0"
          FontSize="11" />
        <TextBlock
          Text="* æ”¯æŒ {0} å ä½ç¬¦"
          FontSize="11" />
      </StackPanel>
    </StackPanel>
  </Grid>
</controls:UserControl>
