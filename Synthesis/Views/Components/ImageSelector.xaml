<controls:UserControl
  x:Class="Synthesis.Views.Components.ImageSelector"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
  TextElement.Foreground="{DynamicResource MaterialDesignBody}"
  xmlns:controls="clr-namespace:System.Windows.Controls;assembly=PresentationFramework">
  <Grid>
    <StackPanel>
      <ComboBox
        x:Name="ImageCombo"
        Style="{StaticResource MaterialDesignFloatingHintComboBox}"
        IsEditable="True"
        StaysOpenOnEdit="True"
        IsTextSearchEnabled="False"
        Margin="0,0,0,10"
        materialDesign:HintAssist.Hint="{Binding LabelText, FallbackValue='Image Name', RelativeSource={RelativeSource AncestorType=UserControl}}"
        ItemsSource="{Binding ImageList, RelativeSource={RelativeSource AncestorType=UserControl}}"
        Text="{Binding SelectedImageName, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay, RelativeSource={RelativeSource AncestorType=UserControl}}"
        TextBoxBase.TextChanged="ImageCombo_TextChanged"
        SelectionChanged="ImageCombo_SelectionChanged" />
      <Border
        BorderBrush="{DynamicResource MaterialDesignDivider}"
        BorderThickness="1"
        CornerRadius="4"
        ClipToBounds="True"
        HorizontalAlignment="Left"
        Background="{DynamicResource MaterialDesignPaper}"
        Width="{Binding PreviewWidth, RelativeSource={RelativeSource AncestorType=UserControl}}"
        Height="{Binding PreviewHeight, RelativeSource={RelativeSource AncestorType=UserControl}}">
        <Grid>
          <Border
            Opacity="0.05">
            <Border.Background>
              <DrawingBrush
                TileMode="Tile"
                Viewport="0,0,10,10"
                ViewportUnits="Absolute">
                <DrawingBrush.Drawing>
                  <GeometryDrawing
                    Brush="#FF808080">
                    <GeometryDrawing.Geometry>
                      <GeometryGroup>
                        <RectangleGeometry
                          Rect="0,0,5,5" />
                        <RectangleGeometry
                          Rect="5,5,5,5" />
                      </GeometryGroup>
                    </GeometryDrawing.Geometry>
                  </GeometryDrawing>
                </DrawingBrush.Drawing>
              </DrawingBrush>
            </Border.Background>
          </Border>
          <Image
            x:Name="PreviewImage"
            Stretch="Uniform"
            RenderOptions.BitmapScalingMode="HighQuality" />
        </Grid>
      </Border>
    </StackPanel>
  </Grid>
</controls:UserControl>
